/* =========================================================
   GLOBAL APP STYLES
   ========================================================= */
:root{
  --sidebar-w: 240px;
  --sidebar-bg: #1f2937;        /* dark slate */
  --sidebar-hover: #374151;
  --sidebar-text: #e5e7eb;
  --sidebar-border: rgba(255,255,255,.08);

  /* Ukuran brand (ubah sesukamu) */
  --brand-size-desktop: 40px;   /* sidebar (desktop) */
  --brand-size-mobile: 50px;    /* offcanvas header (mobile) */
}

html, body { height: 100%; overflow-x: hidden; }
.app-wrapper{ display:flex; min-height:100vh; overflow-x: hidden; }

/* ================= Sidebar (desktop) ================= */
.app-sidebar{
  flex: 0 0 var(--sidebar-w);
  width: var(--sidebar-w);
  min-height: 100vh;
  background: var(--sidebar-bg);
  color: var(--sidebar-text);
  position: sticky; top: 0;
  overflow-y: auto; overflow-x: hidden;
}

/* Brand desktop: logo kiri + teks kanan */
.app-sidebar .sidebar-brand{ border-bottom:none; }
.app-sidebar .brand-img{
  width: var(--brand-size-desktop);
  height: var(--brand-size-desktop);
  object-fit: contain;
  border-radius: 4px;
}
.app-sidebar .brand-text{
  color: var(--sidebar-text);
  font-weight: 700;
  font-size: 1.1rem;
  line-height: 1;
}

/* ================= Content ================= */
.app-content{ flex:1 1 auto; min-width:0; width:100%; }

/* ================= Offcanvas (mobile) ================= */
#offcanvasSidebar{
  width: var(--sidebar-w);
  max-width: 100vw;
  background: var(--sidebar-bg);
  color: var(--sidebar-text);
  overflow-x: hidden;
  -webkit-overflow-scrolling: touch;
  touch-action: pan-y;
  overscroll-behavior-x: contain;
}
#offcanvasSidebar .offcanvas-header{
  background: var(--sidebar-bg);
  color: var(--sidebar-text);
  border-bottom: none !important;
}
/* Brand di header offcanvas (logo kecil tapi tidak mini) */
#offcanvasSidebar .offcanvas-header .brand-img-sm{
  width: var(--brand-size-mobile) !important;
  height: var(--brand-size-mobile) !important;
  object-fit: contain;
  border-radius: 4px;
}
#offcanvasSidebar .offcanvas-header .brand-text{
  color: var(--sidebar-text);
  font-weight: 700;
  font-size: 1.05rem;
  line-height: 1;
}
/* Jika ada brand di BODY offcanvas (harusnya tidak), sembunyikan agar tak dobel */
#offcanvasSidebar .offcanvas-body .sidebar-brand{ display:none !important; }

#offcanvasSidebar .offcanvas-body{ overflow-x: hidden; }

/* ================= Topbar (samakan warna dengan sidebar) ================= */
.app-topbar{
  background: var(--sidebar-bg) !important;
  color: var(--sidebar-text) !important;
  border-bottom: 1px solid var(--sidebar-border);
}
.app-topbar .navbar-brand,
.app-topbar .nav-link,
.app-topbar .navbar-text{ color: var(--sidebar-text) !important; }
.btn-topbar{
  color: var(--sidebar-text) !important;
  border: 1px solid rgba(255,255,255,.25);
  background: transparent;
}
.btn-topbar:hover{
  background: var(--sidebar-hover);
  color: #fff !important;
  border-color: rgba(255,255,255,.35);
}
.app-topbar #notifCount{ transform: translate(-50%,-50%); }

/* ================= Sidebar Navigation ================= */
.sidebar-nav{ list-style:none; margin:0; padding:0; }
.sidebar-nav .nav-link{
  display:flex; align-items:center; gap:.5rem;
  color:#d1d5db;
  padding:.625rem 1rem;
  border-radius:.5rem;
  margin:.15rem .5rem;
  white-space:nowrap;
  overflow:hidden; text-overflow:ellipsis;
  transition: background-color .15s ease, color .15s ease;
}
.sidebar-nav .nav-link i{ width:1.25rem; text-align:center; }
.sidebar-nav .nav-link:hover,
.sidebar-nav .nav-link.active{
  background: var(--sidebar-hover);
  color:#fff;
}
/* Submenu */
.sidebar-nav .nav .nav-link{
  padding-left:1.25rem;
  border-left:1px solid var(--sidebar-border);
  margin-left:1rem;
  max-width: calc(100% - 1rem);
}

/* Caret rotate */
.sidebar-caret{ transition: transform .2s ease; }
[aria-expanded="true"] .sidebar-caret{ transform: rotate(180deg); }

/* ================= Common ================= */
.dropdown-menu-notif li > a,
.dropdown-menu-notif li > .px-3{ font-size:.9rem; }
.text-dark-50{ color:rgba(0,0,0,.5)!important; }
.app-sidebar::-webkit-scrollbar{ width:8px; }
.app-sidebar::-webkit-scrollbar-thumb{ background:#2b3443; border-radius:8px; }

@media (min-width:768px){
  .app-content{ /* no margin-left */ }
}

/* ================= Mobile-only animations ================= */
@media (max-width: 767.98px){
  :root{
    --ease-smooth: cubic-bezier(.22,.61,.36,1);
    --offcanvas-dur: 280ms;
  }
  #offcanvasSidebar{
    --bs-offcanvas-transition: transform var(--offcanvas-dur) var(--ease-smooth);
    will-change: transform;
  }
  .offcanvas-backdrop.fade{ opacity:0; }
  .offcanvas-backdrop.show{
    opacity:.35;
    transition: opacity var(--offcanvas-dur) var(--ease-smooth);
    backdrop-filter: blur(1px);
  }
  @keyframes oc-fade-slide-in{
    from{ opacity:0; transform:translateX(-8px); }
    to{   opacity:1; transform:none; }
  }
  #offcanvasSidebar .oc-item-animate{
    animation: oc-fade-slide-in var(--offcanvas-dur) var(--ease-smooth) both;
  }
}

/* Respect reduced motion */
@media (prefers-reduced-motion: reduce){
  #offcanvasSidebar,
  .offcanvas-backdrop{ transition:none!important; animation:none!important; }
}

/* Utility */
img{ max-width:100%; height:auto; }
